{% extends 'base.html' %}

{% load static %}

{% block title %} | Students {% endblock title %}

{% block head_block %}

<link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.2.9/css/responsive.dataTables.min.css">
<link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">

{% endblock %}

{% block content %}


    <section id="showcase-inner" class="py-2 text-white">
        <div class="container">
        <div class="row text-center">
            <div class="col-md-12">
                <h1 class="display-4">Students</h1>
                <p class="lead">View all the students from VRCNHS</p>
            </div>
        </div>
        </div>
    </section>


    <div class='container'>
        
        <!-- MESSAGES -->

        <br>

        <br>

        <!-- STUDENTS -->
        <div class='table-responsive'>
            <table id="studentTable" class="table table-striped">
                <thead>
                    <tr>
                        <th>LRN</th>
                        <th>Name</th>
                        <th>Status</th>
                        <th>Age</th>
                        <th>Grade & Section</th>
                        <th>General Average</th>
                        <th>Detail</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        {% if students %}
                            {% for student in students %}
                                <td>{{ student.LRN }}</td>
                                <td>{{ student.last_name }}
                                    {% if student.suffix_name %} {{ student.suffix_name }}{% endif %}
                                    {% if student.first_name %}, {{ student.first_name }}{% endif %}
                                    {% if student.middle_name %} {{ student.middle_name }}{% endif %}
                                </td>
                                <td>{{ student.status }}</td>
                                <td>{{ student.age }}</td>
                                <td>{{ student.gradelevel.grade }} {{ student.classroom }}</td>
                                <td>{{ student.general_average }}</td>
                                <td>
                                    {% comment %} {% url 'view_student_detail' lrn=student.LRN %} {% endcomment %}
                                    <a href="#" class="btn btn-primary view-button">
                                        View Profile
                                    </a>
                                </td>
                            {% endfor %}
                        {% else %}
                            <tr>
                                <td colspan="7" class="text-center">No Students in the Database</td>
                            </tr>
                        {% endif %}

                    </tr>
                </tbody>
            </table>
            <center>
            {% comment %} {% url 'add_student' %} {% endcomment %}
            <form action="#" method="get">
                <button type="submit" class="btn btn-primary">
                    Manually Add A Student
                </button>
            </form>
            </center>
        </div>


        <br>

        <br>

        <br>
        <center>
        <div class="card">
            <!-- IMPORT -->
            {% comment %} <a href=" {% url 'download_template' %}"" {% endcomment %}
            <h6>IMPORT STUDENTS using Excel (.xlsx) files. Please use <a href="#" download>This Template.</a></h6>
            {% comment %} <a href=" {% url 'import_students' %}"" {% endcomment %}
            <form method="post" enctype="multipart/form-data" action="#">
                {% csrf_token %}
                <div class="mb-3">
                    <label for="formFile" class="form-label">Upload Excel File of Students:</label>
                    <div class="file-upload-wrapper">
                    <input class="form-control" type="file" name="myfile" id="formFile" required>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Upload</button>
            </form>
        </div>

            <br>
            <!-- End of Import button and form -->
            <br>
            {% comment %} {% url 'export_students' %} {% endcomment %}
            <a href="#">
                <button type="button" class="export-button">
                    EXPORT ALL STUDENTS
                </button>
            </a>
        </center>
        <br>
        <br>

    </div>
{% endblock %}
